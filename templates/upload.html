<!-- 上传页面模板 -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/spin.js/2.3.2/spin.min.css" rel="stylesheet">
    <link href="https://hao.carlsky.cn/images/cat.png" rel="icon">
    <title>「HAO-Netdisk」上传文件</title>
    <style>
        body {
            background-color: #f8f9fa;
            padding-bottom: 20px;
        }

        .container {
            max-width: 600px;
            margin: auto;
        }

        h1 {
            color: #007bff;
        }

        form {
            margin-top: 20px;
        }

        label {
            color: #343a40;
            font-weight: bold;
        }

        .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
        }

        .btn-primary:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }

        #loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
        }

    </style>
    {% extends 'layout.html' %}

    {% block title %}首页 - [HAO-Netdisk]文件下载{% endblock %}

    {% block content %}
    <title>上传文件 - HAO-Netdisk</title>
</head>
<body>
<!-- 加载动画 -->
<div id="loading">
    <div class="spinner"></div>
</div>
<div class="container">
    <h1 class="mt-3">上传文件</h1>
    <form enctype="multipart/form-data" method="POST">
        <div class="mb-3">
            <label class="form-label" for="file">选择文件</label>
            <input class="form-control" id="file" name="file" required type="file">
        </div>
        <div class="mb-3">
            <label class="form-label" for="description">文件简介</label>
            <textarea class="form-control" id="description" name="description" required rows="3"></textarea>
        </div>
        <div class="mb-3">
            <label class="form-label" for="username">上传用户名</label>
            <input class="form-control" id="username" name="username" required type="text">
        </div>
        <button class="btn btn-primary" type="submit">上传文件</button>
    </form>
</div>
{% endblock %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var dropZone = document.getElementById('drop-zone');

        dropZone.addEventListener('dragover', function (e) {
            e.preventDefault();
            dropZone.classList.add('dragover');
        });

        dropZone.addEventListener('dragleave', function () {
            dropZone.classList.remove('dragover');
        });

        dropZone.addEventListener('drop', function (e) {
            e.preventDefault();
            dropZone.classList.remove('dragover');

            var fileInput = document.getElementById('file');
            fileInput.files = e.dataTransfer.files;

            // Optionally, you can also display the selected file names
            var fileNameDisplay = document.getElementById('file-names');
            fileNameDisplay.innerHTML = '';
            for (var i = 0; i < fileInput.files.length; i++) {
                fileNameDisplay.innerHTML += fileInput.files[i].name + '<br>';
            }
        });
    });
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/spin.js/2.3.2/spin.min.js"></script>
<!-- 自定义脚本 -->
<script>
    // 页面加载时显示加载动画
    document.addEventListener("DOMContentLoaded", function () {
        var target = document.getElementById('loading');
        var spinner = new Spinner().spin();
        target.appendChild(spinner.el);
        target.style.display = 'block';

        // 模拟加载完成后隐藏加载动画
        setTimeout(function () {
            target.style.display = 'none';
        }, 2000);  // 设置一个合适的时间，这里是2秒
    });
</script>

</body>
</html>
